<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - UNZA Carbon Calculator Yanga</title>
  <link rel="stylesheet" href="style_unza.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>
</head>
  <style>

    /* Page background */
  html, body {
    height: 100%;
    margin: 0;
    font-family: 'Poppins', sans-serif;
  }

  body {
    /* make sure the path is correct relative to this HTML file */
    background-image: url("images/greenfield.jpg");
    background-size: cover;          /* cover whole screen */
    background-position: center;     /* center image */
    background-repeat: no-repeat;
    background-attachment: fixed;    /* optional: remove if causing issues on mobile */
    background-color: #eaf3ea;       /* fallback color while image loads */
  }

  /* main container centers the card and provides overlay */
  .main-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    position: relative;
  }

  /* dark overlay on top of the background to improve contrast */
  .main-container::before {
   content: none;
  }
    
    .auth-container {
      max-width: 600px;
      width: 100%;
      text-align: center;
      justify-content: center;
      align-items: center;
    }
    .auth-tabs {
      display: flex;
      justify-content: center;
      margin: 15px 0;
      max-width: 600px;
      width: 100%;
      align-items: center;
    }
    .tab-btn {
      flex: 1;
      padding: 10px;
      cursor: pointer;
      border: none;
      background: #f0f0f0;
      font-weight: 600;
    }
    .tab-btn.active {
      background: #2e7d32;
      color: #fff;
    }
    .auth-form {
      display: none;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      width: 100%;           /* Make form take full container width */
      max-width: 500px;      /* Control how wide the form grows */
      margin: 0 auto;        /* Keep it centered inside container */
    }
    .auth-form.active {
      display: flex;
    }
    .auth-form input {
      width: 100%;           /* Inputs and buttons span full form width */
      max-width: 500px;      /* Optional: limit width */
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .error-message {
      color: red;
      font-size: 0.9em;
      margin-top: 5px;
    }
    /* ðŸ”½ Mobile tweaks */
@media (max-width: 756px) {
  .main-container {
    padding: 20px 10px;   /* tighter padding for small screens */
  }
  .auth-container {
    padding: 20px 15px;   /* make form feel roomy */
  }
  .auth-form {
    gap: 12px;           /* slightly bigger spacing between inputs */
  }
  .tab-btn {
    padding: 12px 8px;   /* more finger-friendly */
    font-size: 0.95rem;
  }
}
  </style>
<body>
  <div class="main-container">
    <div class="container auth-container">
      <h1><i class="fas fa-leaf"></i> UNZA Carbon Calculator Yanga</h1>
      <h2>Welcome</h2>

      <!-- Tab Buttons -->
      <div class="auth-tabs">
        <button id="loginTab" class="tab-btn active" onclick="showForm('login')">Login</button>
        <button id="signupTab" class="tab-btn" onclick="showForm('signup')">Sign Up</button>
      </div>

      <!-- Login Form -->
      <form id="loginForm" class="auth-form active">
        <input type="email" id="loginEmail" placeholder="Email" required>
        <input type="password" id="loginPassword" placeholder="Password" required>
        <button type="submit" class="calculate-btn">Login</button>
        <p id="loginError" class="error-message"></p>
      </form>

      <!-- Signup Form -->
      <form id="signupForm" class="auth-form">
        <input type="text" id="signupName" placeholder="Full Name" required>
        <input type="email" id="signupEmail" placeholder="Email" required>
        <input type="password" id="signupPassword" placeholder="Password (min 6 chars)" required>
        <button type="submit" class="calculate-btn">Sign Up</button>
        <p id="signupError" class="error-message"></p>
      </form>
    </div>
  </div>

  <script>
    // âœ… Use your Firebase config here
    const firebaseConfig = {
    apiKey: "AIzaSyCI0zbu9vXg4j26loOHVExJSoEee-7E7LU",
    authDomain: "unza-s-site.firebaseapp.com",
    projectId: "unza-s-site",
    storageBucket: "unza-s-site.firebasestorage.app",
    messagingSenderId: "691190316366",
    appId: "1:691190316366:web:da52c76c6f6380faccb21f",
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Switch between login/signup
    function showForm(form) {
      document.querySelectorAll(".auth-form").forEach(f => f.classList.remove("active"));
      document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("active"));
      if (form === 'login') {
        document.getElementById("loginForm").classList.add("active");
        document.getElementById("loginTab").classList.add("active");
      } else {
        document.getElementById("signupForm").classList.add("active");
        document.getElementById("signupTab").classList.add("active");
      }
    }

    // Login
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;
      try {
        await auth.signInWithEmailAndPassword(email, password);
        window.location.href = "dashboard.html";
      } catch (err) {
        let message;
        message = "Invalid email or password. Please try again.";
        document.getElementById("loginError").textContent = message;
      }
    });

    // Signup
    document.getElementById("signupForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("signupName").value;
      const email = document.getElementById("signupEmail").value;
      const password = document.getElementById("signupPassword").value;
      try {
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        await db.collection("users").doc(userCredential.user.uid).set({
          name: name,
          email: email,
          createdAt: new Date()
        });
        window.location.href = "dashboard.html";
      } catch (err) {
        document.getElementById("signupError").textContent = err.message;
      }
    });

    // Redirect if logged in already
    auth.onAuthStateChanged(user => {
      if (user) {
        window.location.href = "dashboard.html";
      }
    });
  </script>

  
</body>
</html>
























